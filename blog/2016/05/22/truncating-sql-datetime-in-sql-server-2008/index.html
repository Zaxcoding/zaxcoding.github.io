<!doctype html>
    <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
    <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
    <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

    
      
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Truncating SQL DateTime in SQL Server 2008 - Zach Sadler</title>
        <meta name="author" content="Zach Sadler">
        
        <meta name="description" content="Truncating SQL DateTime in SQL Server 2008 May 22nd, 2016 today i learned Recently a coworker was writing a T-SQL script to compare ten-minute &hellip;">
        
        <meta name="viewport" content="width=device-width">
        <link rel="canonical" href="http://zaxcoding.github.io/blog/2016/05/22/truncating-sql-datetime-in-sql-server-2008">

        <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic' rel='stylesheet' type='text/css'>
        <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">

        
        <link href="/favicon.png" rel="icon">
        <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
        <link href="/atom.xml" rel="alternate" title="Zach Sadler" type="application/atom+xml">
    </head>


    <body >

        <header id="header">
    <div class="row">
    <div class="col-xs-12 col-sm-8 col-md-4">
        <a href="/" class="site-title">Zach Sadler</a>
    </div>
    <div class="col-xs-12 col-sm-4 col-md-8">
        <nav>
    <input type="checkbox" id="toggle">
    <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
    <ul class="menu">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="https://www.upwork.com/freelancers/~015f21b2353e9841ac">My Upwork</a></li>
</ul>

</nav>

    </div>
</div>

</header>


        <div id="main-content">

            <!--[if lte IE 9]>
<div class="row upgrade-row">
    <div class="col-lg-12">
        <div class="upgrade">
            <i class="upgrade__icon fa fa-warning"></i>
            <h1 class="upgrade__title h6">Ohnoes!</h1>
            <p class="upgrade__text">
                Unfortunately, certain parts of this site may not display correctly in your version of Internet Explorer!<br>
                If possible, you should consider <a href="http://browsehappy.com/">upgrading your browser</a>.
            </p>
        </div>
    </div>
</div>
<!-- <![endif]-->


            

            <div class="row top-xs center-sm center-md center-lg site-wrapper">
                
                <div class="col-xs-12 col-sm-10 col-md-8 col-lg-8">
                
                    <article class="article article--single">
    <header class="article__header">
    
        <h1 class="article__title">Truncating SQL DateTime in SQL Server 2008</h1>
    

    
        <div class="article__meta clearfix">
            






    <time class="article__date pull-left" datetime="2016-05-22T12:40:08-04:00" pubdate><i class="fa fa-calendar"></i> May 22nd, 2016</time>




            

    <div class="article__tags pull-left">
        <i class="fa fa-tags"></i>
        <ul class="unstyled">
        

            
                <li><a class='category' href='/blog/categories/today-i-learned/'>today i learned</a></li>
            
        
        </ul>
    </div>


            
        </div>
    
</header>




    <p>Recently a coworker was writing a T-SQL script to compare ten-minute timeslices against each other. He was trying to figure out an easy, performant way to remove the ones place so that he could treat all timeslices from 01:00.00 to 01:09.99 as the same datetime, and so on. I found a few StackOverflow resources like <a href="http://stackoverflow.com/questions/8896663/a-way-to-extract-from-a-datetime-value-data-without-seconds">this one</a> but none that did exactly what I wanted. I adapted those with some trial and error into this:</p>

<!-- more -->




<figure class='code'><figcaption><span>Ten Minute Time Slices - TIL.sql </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">DECLARE</span> <span class="o">@</span><span class="n">testDate</span> <span class="n">DATETIME</span> <span class="o">=</span> <span class="s1">&#39;2016-05-13 12:57:21.097&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">select</span> <span class="n">dateadd</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span> <span class="p">(</span><span class="n">datepart</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span> <span class="o">@</span><span class="n">testdate</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dateadd</span><span class="p">(</span><span class="n">hour</span><span class="p">,</span> <span class="n">datediff</span><span class="p">(</span><span class="n">hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">@</span><span class="n">testDate</span><span class="p">),</span> <span class="mi">0</span><span class="p">)),</span>
</span><span class='line'>     <span class="n">dateadd</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span> <span class="p">(</span><span class="n">datepart</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span> <span class="o">@</span><span class="n">testdate</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dateadd</span><span class="p">(</span><span class="n">hour</span><span class="p">,</span> <span class="n">datediff</span><span class="p">(</span><span class="n">hour</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">@</span><span class="n">testDate</span><span class="p">),</span> <span class="mi">0</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>




</article>



                </div>

                
                <aside class="sidebar col-xs-12 col-md-4 col-lg-4">
                    <div class="row">

    

    


    <section id="recent-posts" class="col-xs-12 col-sm-6 col-md-12">
    <h1>Recent Posts</h1>
    <ul class="divided">
        
        <li class="post">
            <a href="/blog/2016/05/22/truncating-sql-datetime-in-sql-server-2008/">Truncating SQL DateTime in SQL Server 2008</a>
        </li>
        
        <li class="post">
            <a href="/blog/2016/05/19/super-test-yeah/">Super test yeah</a>
        </li>
        
    </ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/today-i-learned' style='font-size: 160.0%'>today i learned(1)</a> </span>
</section>






</div>

                </aside>
                
            </div>
        </div>

        

    
    




<footer class="footer">
    <div class="row middle-xs">
        
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <p class="footer__copyright">
    All content copyright Zach Sadler.<br>
    Code under <a href="//github.com/coogie/oscailte/blob/master/README.md">MIT Licence</a>.
</p>

        </div>
        
        
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
            <div>
    



    




<div class="hire hire--available hire--vibrant">
    <a class="hire__link" href="mailto:zaxcoding@gmail.com?subject=New%20job%20opportunity">
        Available for new opportunities
    </a>
</div>

</div>
        </div>
        
    </div>
</footer>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>















    </body>

</html>
